@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix schema: <http://schema.org/> .
@prefix oldap: <http://oldap.org/base#> .
@prefix dcterms: <http://purl.org/dc/terms/> .

@prefix : <http://oldap.org/base#> .

:shacl {

    :shapes schema:version "0.1.0"^^xsd:string .

    #
    # Here we add some SHACL definition in order to indicate that a property is a "statement property"
    # for RDF*star statements about statements.
    #
    :statementProperty a sh:Property ;
        sh:annotationProperty :statementProperty .

    ###########################################################################
    # Some properties to be reused
    ###########################################################################

    #
    # is used to indicate the the property is a RDF*Star property for statements about statements
    #
    :statementPropertyShape
        a sh:PropertyShape ;
        sh:path :statementProperty ;
        sh:datatype xsd:boolean ;
        sh:minCount 0 ;
        sh:maxCount 1 .

    #
    # This property will be reused wherever we need a namespace IRI
    #
    :namespaceIriShape a sh:PropertyShape ;
        sh:path :namespaceIri ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:name "Namespace IRI"@en ;
        sh:description "Describes a namespace"@en ;
        sh:nodeKind sh:IRI .


    ###########################################################################
    # Node shapes for the OLDAP system
    ###########################################################################

    #
    # Definition of an external ontology
    #
    :ExternalOntologyShape a sh:NodeShape ;
        sh:targetClass :ExternalOntology ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:label "External Ontology"@en, "Externe Ontology"@de, "Ontologie externe"@fr, "External Ontology"@it ;
        rdfs:comment "Reference to an external ontology that is being used. Includes prefix and namespace IRI."@en ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path :prefix ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:NCName ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property :namespaceIriShape ;
        sh:property [
            sh:path :namespaceIri ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] .

    #
    # Define a SHACL property group for all system properties. This info can be used to hide these properties from
    # a GUI. These properties should be handled by OLDAPLIB...
    #
    :SystemPropGroup
        a sh:PropertyGroup ;
        sh:order "0"^^xsd:decimal ;
        rdfs:label "System Property"@en .

    #
    # SHACL definition of the oldap:AdminPermission class. The AdminPermission instances are attached as
    # RDF*star to the triple that defines to which oldap:project as oldap:User belongs to.
    # E.g. <<<https://orcid.org/0000-0003-1681-4036> :inProject :SystemProject>> :hasAdminPermission :ADMIN_PROJECT .
    #
    :AdminPermissionShape a sh:NodeShape ;
        sh:targetClass :AdminPermission ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:label "AdminPermission"@en, "AdminPermission"@de, "AdminPermission"@fr, "AdminPermission"@it ;
        rdfs:comment "Defines administrator permissions."@en ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path rdfs:label ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] ;
        sh:property [
            sh:path rdfs:comment ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] .

    #
    # Property to assign a admin permission
    # E.g. <<<https://orcid.org/0000-0003-1681-4036> :inProject :SystemProject>> :hasAdminPermission :ADMIN_PROJECT .
    #
    :hasAdminPermissionShape a sh:PropertyShape ;
        sh:path :hasAdminPermission ;
        :statementProperty true ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:class :AdminPermission .

    #
    # Data permission shape
    #
    :DataPermissionShape a sh:NodeShape ;
        sh:targetClass :DataPermission ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:label "DataPermission"@en, "DataPermission"@de, "DataPermission"@fr, "DataPermission"@it ;
        rdfs:comment "Defines data permissions."@en ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path :permissionValue ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:integer ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "Permission value"@en, "Berechtigungswert"@de, "Valeur de permission"@fr, "Valore di autorizzazione"@it ;
        ] ;
        sh:property [
            sh:path rdfs:label ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] ;
        sh:property [
            sh:path rdfs:comment ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] .

    # TODO: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    # SHACL to define a permission sets. A permission set assigns data permissions to both
    # a given user and a given data instance.
    # Let's assume a PermissionSet instance :MyPermSet which I will use. Then I can give the following
    # permissions:
    #
    #  <<:MyInstance oldap:attachedToRole :MyRole>> oldap:hasDataPermission :DATA_EXTEND .
    #
    # A user with:
    #
    # :ThisUser oldap:hasRole :MyRole, MyRole2 .
    #
    # we may add default values that are proposed as standard values for creating instances:
    #
    # <<:ThisUser oldap:hasRole :MyRole>> oldap:hasDefaultDataPermission :DATA_EXTEND
    # <<:ThisUser oldap:hasRole :MyRole2>> oldap:hasDefaultDataPermission :DATA_RESTRICTED
    #
    # Thus, the user should have maximal :DATA_VIEW access to the given instance
    #
    #    PREFIX : <https://gaga.com/>
    #    PREFIX o: <http://www.ooo.org/ns#>
    #
    #    SELECT ?predicate ?value ?permval
    #    WHERE {
    #        GRAPH :test {
    #            :InstanceA ?predicate ?value ;
    #            	o:attachedToRole ?role .
    #            :UserA o:hasRole ?role .
    #           <<:InstanceA  o:attachedToRole ?role>> o:dataPermission ?permval .
    #        }
    #        FILTER(?permval >= 1)
    #   }
    #

    :RoleShape a sh:NodeShape ;
        sh:targetClass :Role ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:label "Permission role"@en, "Berechtigungsrolle"@de, "Rôle d'autorisation"@fr, "Ruolo di autorizzazione"@it ;
        rdfs:comment "Defines a role regarding data permissions, e.g. Editor, Unknown, Contributor etc."@en ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path :definedByProject ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:class :Project;
            sh:name "Defined by"@en, "Definiert durch"@de, "Défini par"@fr, "Definito da"@it ;
            sh:description "Permission role is define by project"@en,
                           "Der Berechtigungsrolle wird definiert durch das Projekt"@de,
                           "Le rôle d'autorisation est défini par projet."@fr,
                           "Il ruolo di autorizzazione è definito dal progetto"@it ;
        ] ;
        sh:property [
            sh:path rdfs:label ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] ;
        sh:property [
            sh:path rdfs:comment ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] .


    #
    # SHACl definition for project descriptions. Projects are important definitions because the define the namespaces
    # and graph names that are used to store the project specific datamodels (SHACl and OWL)  and data
    #
    :ProjectShape a sh:NodeShape ;
        sh:targetClass :Project ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:label "Project"@en, "Projekt"@de, "Projet"@fr, "Progetto"@it ;
        rdfs:comment "Metadata about a project"@en ;

        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path rdfs:label ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] ;
        sh:property [
            sh:path rdfs:comment ;
            sh:datatype rdf:langString ;
            sh:languageIn ( "en" "de" "fr" "it" ) ;
            sh:uniqueLang true ;
        ] ;
        sh:property [
            sh:path :projectShortName ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:NCName ;
            sh:name "Project ID"@en, "Projekt ID"@de ;
            sh:description "A unique NCName identifying the project"@en ;
            sh:order "1"^^xsd:decimal ;
        ] ;
        sh:property [
            sh:path :externalOntology
        ] ;
        sh:property :namespaceIriShape ;
        sh:property [
            sh:path :namespaceIri ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:order "2"^^xsd:decimal ;
        ] ;
        sh:property [
            sh:path :projectStart ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:name "Start date"@en ;
            sh:description "The date when the project will start/has started" ;
            sh:datatype xsd:date ;
            sh:order "5"^^xsd:decimal ;
        ] ;
        sh:property [
            sh:path :projectEnd ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:datatype xsd:date ;
            sh:name "The date when the project wll end/has ended"@en ;
            sh:order "6"^^xsd:decimal ;
        ] .


    #
    # Nodeshape for :User class which is a subclass of :OldapPerson
    #
    :UserShape a sh:NodeShape ;
        sh:targetClass :User ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path :userId ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:minLength "3"^^xsd:integer ;
            sh:maxLength "32"^^xsd:integer ;
            sh:datatype xsd:NCName ;
        ] ;
        sh:property [
            sh:path schema:familyName ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:string ;
            sh:name "Family name"@en, "Familiennamen"@de, "Nom de famillie"@fr, "Nome della famiglia"@it ;
            sh:description "The family name of some person."@en ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
        ] ;
        sh:property [
            sh:path schema:givenName ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:string ;
            sh:name "Given name"@en, "Vornamen"@de, "Prénom"@fr, "Nome"@it ;
            sh:description "The given name of some person"@en ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
        ] ;
        sh:property [
            sh:path schema:email ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype xsd:string ;
            sh:pattern "^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$" ;
            sh:message "Email address must be a valid format (user@example.org)." ;
            sh:name "Email"@en, "Email"@de, "Courriel"@fr, "E-mail"@it ;
            sh:description "Email address."@en ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
        ] ;
        sh:property [
            sh:path :credentials ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:string ;
            sh:or (
                [ sh:pattern "^\\$2[aby]\\$\\d{2}\\$[A-Za-z0-9./]{53}$" ]                # bcrypt
                [ sh:pattern "^\\$argon2(id|i|d)\\$v=\\d+\\$m=\\d+,t=\\d+,p=\\d+\\$[A-Za-z0-9+/=]+\\$[A-Za-z0-9+/=]+$" ]  # Argon2
            ) ;
            sh:name "Password"@en, "Passwort"@de, "Mot de passe"@fr, "Password"@it ;
            sh:description "Password for user."@en ;
        ] ;
        sh:property [
            sh:path :inProject ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:class :Project ;
            :statementShape :inProjectStatementShape ;
        ] ;
        sh:property [
            sh:path :isActive ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:boolean ;
        ] ;
        sh:property [
            sh:path :hasRole ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:class :Role ;
        ] .

    :inProjectStatementShape a sh:NodeShape ;
        sh:property [
            sh:path :hasAdminPermission ;
            sh:class :AdminPermission ;
        ] .

    #
    # Hierarchical lists are implemented using :List's and :ListNodes. We will use some skos vocabulary
    #
    :OldapListShape a sh:NodeShape ;
        sh:targetClass :OldapList ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path skos:prefLabel ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:datatype rdf:langString ;
            sh:uniqueLang true ;
            sh:order "1"^^xsd:decimal ;
        ] ;
        sh:property [
            sh:path skos:definition ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype rdf:langString ;
            sh:uniqueLang true ;
        ] ;
        sh:closed true .


    :OldapListNodeShape a sh:NodeShape ;
        sh:targetClass :OldapListNode ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path dcterms:creator ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:created ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:contributor ;
            sh:class :User ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path dcterms:modified ;
            sh:datatype xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
        ] ;
        sh:property [
            sh:path skos:inScheme ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:class :OldapList ;
        ] ;
        sh:property [
            sh:path skos:broader ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:class :OldapListNode ;
        ] ;
        sh:property [
            sh:path :leftIndex ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:positiveInteger ;
        ] ;
        sh:property [
            sh:path :rightIndex ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:positiveInteger ;
        ] ;
        sh:property [
            sh:path skos:prefLabel ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:minCount 1 ;
            sh:datatype rdf:langString ;
            sh:uniqueLang true ;
            sh:order "1"^^xsd:decimal ;
        ] ;
        sh:property [
            sh:path skos:definition ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:datatype rdf:langString ;
            sh:uniqueLang true ;
        ] ;
        sh:closed true .

    ###########################################################################
    # Statment property (RDF#star) for assigning a data permission to a :Thing
    ###########################################################################
    :hasDataPermissionShape a sh:PropertyShape ;
        :statementProperty true ;
        sh:targetClass :hasDataPermission ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:name "has data permission"@en ;
        sh:description "Assigns a data permission"@en ;
        sh:class :DataPermission .


    ###########################################################################
    # :Thing is a superclass of all instance classes that OLDAP defines
    ###########################################################################
    :ThingShape a sh:NodeShape ;
        sh:targetClass :Thing ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        sh:property [
            sh:path rdf:type ;
        ] ;
        sh:property [
            sh:path :createdBy ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:class :User ;
        ] ;
        sh:property [
            sh:path :creationDate ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:datatype xsd:dateTimeStamp ;
        ] ;
        sh:property [
            sh:path :lastModifiedBy ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:class :User ;
        ] ;
        sh:property [
            sh:path :lastModificationDate ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:datatype xsd:dateTimeStamp ;
        ] ;
        sh:property [
            sh:path :attachedToRole ;
            dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
            dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
            sh:class :Role ;
        ] .

}

:onto {
    oldap:ontology rdf:type owl:Ontology ;
        owl:versionInfo "0.1.0"^^xsd:string ;
        owl:versionIRI <http://oldap.org/ontology/oldap/version/0.1.0> .


    #
    # used for SHACL definition of external ontologies like dcterms etc.
    #
    oldap:externalOntology a owl:AnnotationProperty .

    ###############################################################################
    # Extension (non-standard) for RDF*star
    ###############################################################################
    :statementShape a owl:ObjectProperty ;
        rdfs:label "statement shape for RDF-star annotation"@en ;
        rdfs:comment "Links a sh:PropertyShape to a sh:NodeShape that constrains annotations on <<S P O>>."@en ;
        rdfs:domain sh:PropertyShape ;
        rdfs:range  sh:NodeShape .

    :statementProperty a owl:DatatypeProperty ;
        rdfs:domain sh:PropertyShape ;
        rdfs:range xsd:boolean ;
        rdfs:label "Statement property flag"@en ;
        rdfs:comment "Indicates whether the SHACL property is used as a statement-level (RDF-star) annotation property."@en .

    ###############################################################################
    # Standard Properties that are used everywhere
    ###############################################################################
    :hasAdminPermission a owl:ObjectProperty ;
        rdfs:range :AdminPermission .

    :namespaceIri a owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:domain :ExternalOntology ;
        rdfs:range owl:Thing .

    ###############################################################################
    # Properties used for extrernal ontologies
    ###############################################################################
    :prefix a owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:domain :ExternalOntology ;
        rdfs:range xsd:NCName .

    ###############################################################################
    # Properties that are used by the :DataPermission class
    ###############################################################################

    :permissionValue rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :DataPermission ;
        rdfs:range xsd:integer .


    ###############################################################################
    # Properties that are used by the :Thing class
    ###############################################################################

    :createdBy rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :OldapThing ;
        rdfs:range :User .

    :lastModifiedBy rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :OldapThing ;
        rdfs:range :User .

    :creationDate rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :Thing ;
        rdfs:range xsd:dateTimeStamp .

    :lastModificationDate rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :Thing ;
        rdfs:range xsd:dateTimeStamp .

    :attachedToRole rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :Thing ;
        rdfs:range :Role .

    :definedByProject rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :Role ;
        rdfs:range :Project .


    ###############################################################################
    # Properties used for :User
    ###############################################################################

    :userId rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :User ;
        rdfs:range xsd:NCName .

    :credentials rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :User ;
        rdfs:range xsd:string .

    :inProject rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :User ;
        rdfs:range oldap:Project .

    :isActive rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :User ;
        rdfs:range xsd:boolean .

    :hasRole rdf:type owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :User ;
        rdfs:range :Role .

    #
    # RDF*Star property to assign an admin permission to a user/project combination
    :hasAdminPermission a rdf:Property ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:range :AdminPermission .

    ###############################################################################
    # Properties used for :Project
    ###############################################################################

    :projectShortName rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain oldap:Project ;
        rdfs:range xsd:NCName .

    :projectStart rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subPropertyOf owl:topDataProperty ;
        rdfs:domain oldap:Project ;
        rdfs:range xsd:date .

    :projectEnd rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain oldap:Project ;
        rdfs:range xsd:date .


    ###############################################################################
    # Properties used for :List and :ListNode
    ###############################################################################

    ###  oldap:ontology#leftIndex
    :leftIndex rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :OldapListNode ;
        rdfs:range xsd:positiveInteger .

    ###  oldap:ontology#rightIndex
    :rightIndex rdf:type owl:DatatypeProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:domain :OldapListNode ;
        rdfs:range xsd:positiveInteger .

    ###############################################################################
    # Properties used for assigning data permission to an instance (RDF*star)
    ###############################################################################

    #
    # Example: <<:MyInstance :attachedToRole>> :hasDataPermission :DATA_RESTRICTED .
    #
    :hasDataPermission rdf:type rdf:Property, owl:ObjectProperty ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime ;
        rdfs:range :DataPermission .


    #################################################################
    #    Classes
    #################################################################

    #################################################################
    # AdminPermission class (template for administrative permissions)
    #################################################################

    :ExternalOntology rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf [
            rdf:type owl:Restriction ;
            owl:onProperty dcterms:creator ;
            owl:onClass :User ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] , [
            rdf:type owl:Restriction ;
            owl:onProperty dcterms:created ;
            owl:onDataRange xsd:dateTime ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] , [
            rdf:type owl:Restriction ;
            owl:onProperty dcterms:contributor ;
            owl:onClass :User ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] , [
            rdf:type owl:Restriction ;
            owl:onProperty dcterms:modified ;
            owl:onDataRange xsd:dateTime ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] , [
            rdf:type owl:Restriction ;
            owl:onProperty :prefix ;
            owl:onDataRange xsd:NCname ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] ,
        [
            rdf:type owl:Restriction ;
            owl:onProperty :namespaceIri ;
            owl:onClass owl:Thing ;
            owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
        ] .


    oldap:AdminPermission rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:label ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger
            ] ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:comment ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger
            ] .


    #################################################################
    # DataPermission class (template for administrative permissions)
    #################################################################

    oldap:DataPermission rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:label ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger
            ] ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:comment ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger
            ] ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty oldap:permissionValue ;
                owl:onDataRange xsd:integer ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger
            ] .


    #################################################################
    # Role class (Holding class of resource permissions)
    #################################################################

    :Role a owl:class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:creator ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:created ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
                            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:contributor ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:modified ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :definedByProject ;
                owl:onClass :DataPermission ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:label ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:comment ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ] .


    #################################################################
    # Project class defining a project in OLDAP...
    #################################################################
    :Project rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:creator ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:created ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:contributor ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:modified ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:label ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty rdfs:comment ;
                owl:onDataRange rdf:langString ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :projectShortName ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:NCName
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :namespaceIri ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:anyURI ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :projectStart ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:date
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :projectEnd ;
                owl:maxQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:date
            ] .

    #################################################################
    # User class defining a the template of a OLDAP user
    #################################################################
    :User rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:creator ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:created ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:contributor ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onClass :User ;
           ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:modified ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:dateTime ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :userId ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:NCName
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :credentials ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty schema:familyName ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty schema:givenName ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty schema:email ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty :inProject ;
                owl:minQualifiedCardinality "0"^^xsd:nonNegativeInteger ;
                owl:onClass oldap:Project
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty :isActive ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:boolean
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty :hasRole ;
                owl:minQualifiedCardinality "0"^^xsd:nonNegativeInteger ;
                owl:onClass :Role
            ] .


    #################################################################
    # List class defining a (possibly hierarchical) list
    #################################################################
    :OldapList rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            skos:ConceptScheme,
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:creator ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:created ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
                            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:contributor ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:modified ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:prefLabel ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:definition ;
                owl:maxQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] .


    #################################################################
    # List class defining a list node
    #################################################################
    :OldapListNode rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            skos:Concept,
             [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:creator ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:created ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
                            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:contributor ;
                owl:onClass :User ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty dcterms:modified ;
                owl:onDataRange xsd:dateTime ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:inScheme ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onClass :OldapList
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:broader ;
                owl:maxQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onClass :OldapListNode
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:prefLabel ;
                owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :leftIndex ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:positiveInteger
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :rightIndex ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:positiveInteger
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty skos:definition ;
                owl:maxQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:string
            ] .

    ###  oldap:ontology#OldapThing
    :Thing rdf:type owl:Class ;
        dcterms:creator <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:created "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        dcterms:contributor <https://orcid.org/0000-0003-1681-4036> ;
        dcterms:modified "2023-11-04T12:00:00Z"^^xsd:dateTime ;
        rdfs:subClassOf
            [
                rdf:type owl:Restriction ;
                owl:onProperty :createdBy ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onClass :User
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :lastModifiedBy ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onClass :User
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :creationDate ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:dateTimeStamp
            ],
            [
                rdf:type owl:Restriction ;
                owl:onProperty :lastModificationDate ;
                owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                owl:onDataRange xsd:dateTimeStamp
            ] ,
            [
                rdf:type owl:Restriction ;
                owl:onProperty :attachedToRole ;
                owl:minQualifiedCardinality "0"^^xsd:nonNegativeInteger ;
                owl:onClass :Rolse
            ] ;
        rdfs:comment "General super class of all things (resources) in tghe OMAS universe"@en .

}



