@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix omas: <http://omas.org/base#> .

@prefix : <http://omas.org/base#> .


:shacl {

    :shacl dc:hasVersion "1.0.0" ;
        dc:modified "2023-11-04T12:00:00+00:00"^^xsd:dateTime .

#
# First we have 2 properties which can by used by any sh:NodeShape.
# Note: sh:maxCount, sh:minCount and sh:order will have to be defined here and will be used by any reference in a
#       sh:NodeShape!
#
# These properties are references as follows:
#
#   :testPropShape a sh:PropertyShape ;
#      sh:path test;
#      sh:datatype xsd:integer .
#
#   :exampeShape a sh:NodeShape ;
#      sh:property :testPropShape .
#
    :commentShape a sh:PropertyShape ;
        sh:path :comment ;
        sh:datatype xsd:string ;
        sh:name "Kommentar"@de, "Comment"@en, "Commentaire"@fr, "Commentario"@it ;
        sh:languageIn ( "en" "de" "fr" "it" ) ;
        sh:uniqueLang true ;
        sh:maxCount 1 .

    :testShape a sh:PropertyShape ;
        sh:path :test ;
        sh:datatype xsd:integer .

#
# Nodeshape for :Project class
#
    :ProjectShape a sh:NodeShape, :Project ;
        sh:targetClass :Project ;
        rdfs:label "Project"@en, "Projekt"@de, "Projet"@fr, "Progetto"@it ;
        rdfs:comment "Metadata about a project" ;

        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property :testShape ;
        sh:property
            [
                sh:path :projectId ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:NCName ;
                sh:name "Project ID", "Projekt ID"@de ;
                sh:description "A unique QName identifying the project" ;
                sh:order 1 ;
            ] ;
        sh:property
            [
                sh:path :projectName ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;
                sh:languageIn ( "en" "de" "fr" "it" ) ;
                sh:uniqueLang true ;
                sh:name "Project Name" ;
                sh:description "A Name for the project for the human reader" ;
                sh:order 2 ;
            ] ;
        sh:property
            [
                sh:path :projectDescription ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;
                sh:languageIn ( "en" "de" "fr" "it" ) ;
                sh:uniqueLang true ;
                sh:name "Project description" ;
                sh:description "A description of the content, topic, purpose etc. of the project" ;
                sh:order 3 ;
            ] ;
        sh:property
            [
                sh:path :projectStart ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:name "Start date" ;
                sh:description "The date when the project will start/has started" ;
                sh:datatype xsd:dateTime ;
                sh:order 4 ;
            ] ;
        sh:property
            [
                sh:path :projectEnd ;
                sh:maxCount 1 ;
                sh:datatype xsd:dateTime ;
                sh:name "The date when the project wll end/has ended" ;
                sh:order 5 ;
            ] ;
        sh:property
            [
                sh:path :projectHasUser ;
                sh:class :OmasUser ;
                sh:order 6 ;
            ] ;
        sh:property :commentShape ;
        sh:closed true .

    #
    # Nodeshape for :OmasUser class which is a subclass of :OmasPerson
    #
    :UserShape a sh:NodeShape, :User ;
        sh:targetClass :User ;
        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property
            [
                sh:path :userId ;
                sh:maxCount 1 ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;
                sh:minLength 6 ;
            ] ;
        sh:property
            [
                sh:path :userCredentials ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
            ] ;
        sh:property
            [
                sh:path :userInProject ;
                sh:class :OmasProject ;
            ] ;
        sh:property
            [
                sh:path :userIsActive ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:boolean ;
            ] ;
        sh:closed true .

    #
    # Definitionen for Date
    #
    :GREGORIAN a rdfs:Resource ;
        rdfs:label "Gregorian" .

    :JULIAN a rdfs:Resource ;
        rdfs:label "Julian" .

    #
    # Nodeshape for :OmasDate
    #
    :DateShape a sh:NodeShape, :Date ;
        sh:targetClass :Date ;
        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property
            [
                sh:path :dateCalendar ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:in ( :GREGORIAN :JULIAN ) ;
            ] ;
        sh:property
            [
                sh:path :dateJDCStart ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:double ;
                sh:lessThanOrEquals :dateJDCEnd ;
            ] ;
        sh:property
            [
                sh:path :dateJDCEnd ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:double ;
            ] ;
        sh:closed true .


    #
    # Nodeshape for all resources
    #
    :ThingShape a sh:NodeShape, :Thing ;
        sh:targetClass :Thing ;
        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property
            [
                sh:path :createdBy ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:class :User ;
            ] ;
        sh:property
            [
                sh:path :creationDate ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:dateTimeStamp ;
            ] ;
        sh:property
            [
                sh:path :lastModificationDate ;
                sh:maxCount 1 ;
                sh:dataType xsd:dateTimeStamp ;
            ] ;
        sh:property
            [
                sh:path :lastModifiedBy ;
                sh:maxCount 1 ;
                sh:class :User ;
            ] .

    #
    # Nodeshape for the list...
    #
    :ListShape a sh:NodeShape, :List ;
        sh:targetClass :List ;
        rdfs:subClassOf skos:ConceptScheme ;
        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property
            [
                sh:path skos:preferredLabel ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;
                sh:languageIn ( "en" "de" "fr" "it" ) ;
                sh:uniqueLang true ;
                sh:order 1 ;
            ] ;
        sh:property
            [
                sh:path skos:definition ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
            ] ;
        sh:closed true .

    :ListNodeShape a sh:NodeShape, :ListNode ;
        sh:targetClass :ListNode ;
        rdfs:subClassOf skos:ConceptScheme ;
        sh:property
            [
                sh:path rdf:type ;
            ] ;
        sh:property
            [
                sh:path skos:inScheme ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:class :OmasList ;
            ] ;
        sh:property
            [
                sh:path skos:broaderTransitive ;
                sh:maxCount 1 ;
                sh:class :OmasListNode ;
            ] ;
        sh:property
            [
                sh:path :nextNode ;
                sh:maxCount 1 ;
                sh:class :OmasListNode ;
            ] ;
        sh:property
            [
                sh:path :leftIndex ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:positiveInteger ;
            ] ;
        sh:property
            [
                sh:path :rightIndex ;
                sh:minCount 1 ;
                sh:maxCount 1 ;
                sh:datatype xsd:positiveInteger ;
            ] ;
        sh:property
            [
                sh:path skos:notation ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
            ] ;
        sh:property
            [
                sh:path skos:preferredLabel ;
                sh:minCount 1 ;
                sh:datatype xsd:string ;
                sh:languageIn ( "en" "de" "fr" "it" ) ;
                sh:uniqueLang true ;
                sh:order 1 ;
            ] ;
        sh:property
            [
                sh:path skos:alternativeLabel ;
                sh:datatype xsd:string ;
            ] ;
        sh:property
            [
                sh:path skos:definition ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
            ] ;
        sh:property
            [
                sh:path skos:note ;
                sh:maxCount 1 ;
                sh:datatype xsd:string ;
            ] ;
        sh:property
            [
                sh:path skos:changeNote ;
                sh:datatype xsd:string ;
            ] ;
        sh:closed true .

}



